---
const currentPath = Astro.url.pathname;
---

<aside id="sidebar" class="bg-primary text-textColor-primary border-r border-border_color h-full sidebar-container transition-all duration-300 ease-in-out" data-state="expanded">
	
	<div class="flex items-center justify-start px-2 h-header sidebar-header">
		<img src="/logo.png" alt="" class="p-4 w-20 filter-[var(--filter-logo)] transition-all duration-1000 ease-in-out sidebar-logo" />
		<h1 class="text-2xl font-bold sidebar-title transition-opacity duration-300">IMS</h1>
	</div>

	<nav class="flex flex-col justify-between pt-4 sidebar-nav" style="height: calc(100dvh - var(--height-header));">

		<!-- NAV ITEMS -->
		<ul class="flex flex-col px-4 gap-2 sidebar-menu">
			<li class="">
				<a href="/" class={`nav_item ${currentPath === '/' ? 'active' : ''}`}>
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="nav_item_icon">
						<path
							d="M11.47 3.841a.75.75 0 0 1 1.06 0l8.69 8.69a.75.75 0 1 0 1.06-1.061l-8.689-8.69a2.25 2.25 0 0 0-3.182 0l-8.69 8.69a.75.75 0 1 0 1.061 1.06l8.69-8.689Z" />
						<path
							d="m12 5.432 8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75V21a.75.75 0 0 1-.75.75H5.625a1.875 1.875 0 0 1-1.875-1.875v-6.198a2.29 2.29 0 0 0 .091-.086L12 5.432Z" />
					</svg>
					<span class="nav_item_text transition-opacity duration-300">Dashboard</span>
				</a>
			</li>
			<li class="">
				<a href="/inventory/Dashboard/" class={`nav_item ${currentPath.startsWith('/inventory') ? 'active' : ''}`}>
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="nav_item_icon">
						<path
							d="M3.375 3C2.339 3 1.5 3.84 1.5 4.875v.75c0 1.036.84 1.875 1.875 1.875h17.25c1.035 0 1.875-.84 1.875-1.875v-.75C22.5 3.839 21.66 3 20.625 3H3.375Z" />
						<path
							fill-rule="evenodd"
							d="m3.087 9 .54 9.176A3 3 0 0 0 6.62 21h10.757a3 3 0 0 0 2.995-2.824L20.913 9H3.087Zm6.163 3.75A.75.75 0 0 1 10 12h4a.75.75 0 0 1 0 1.5h-4a.75.75 0 0 1-.75-.75Z"
							clip-rule="evenodd" />
					</svg>
					<span class="nav_item_text transition-opacity duration-300">Inventory</span>
				</a>
			</li>
			<li>
				<a href="/stock-transaction/dashboard/" class={`nav_item ${currentPath.startsWith('/stock-transaction') ? 'active' : ''}`}>
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="nav_item_icon">
						<path
							fill-Rule="evenodd"
							d="M4.125 3C3.089 3 2.25 3.84 2.25 4.875V18a3 3 0 0 0 3 3h15a3 3 0 0 1-3-3V4.875C17.25 3.839 16.41 3 15.375 3H4.125ZM12 9.75a.75.75 0 0 0 0 1.5h1.5a.75.75 0 0 0 0-1.5H12Zm-.75-2.25a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 0 1.5H12a.75.75 0 0 1-.75-.75ZM6 12.75a.75.75 0 0 0 0 1.5h7.5a.75.75 0 0 0 0-1.5H6Zm-.75 3.75a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5H6a.75.75 0 0 1-.75-.75ZM6 6.75a.75.75 0 0 0-.75.75v3c0 .414.336.75.75.75h3a.75.75 0 0 0 .75-.75v-3A.75.75 0 0 0 9 6.75H6Z"
							clip-Rule="evenodd" />
						<path d="M18.75 6.75h1.875c.621 0 1.125.504 1.125 1.125V18a1.5 1.5 0 0 1-3 0V6.75Z" />
					</svg>
					<span class="nav_item_text transition-opacity duration-300">Transaction</span>
				</a>
			</li>
			<li>
				<a href="/tracking/Dashboard/" class={`nav_item ${currentPath.startsWith('/tracking') ? 'active' : ''}`}>
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="nav_item_icon">
						<path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM6.262 6.072a8.25 8.25 0 1 0 10.562-.766 4.5 4.5 0 0 1-1.318 1.357L14.25 7.5l.165.33a.809.809 0 0 1-1.086 1.085l-.604-.302a1.125 1.125 0 0 0-1.298.21l-.132.131c-.439.44-.439 1.152 0 1.591l.296.296c.256.257.622.374.98.314l1.17-.195c.323-.054.654.036.905.245l1.33 1.108c.32.267.46.694.358 1.1a8.7 8.7 0 0 1-2.288 4.04l-.723.724a1.125 1.125 0 0 1-1.298.21l-.153-.076a1.125 1.125 0 0 1-.622-1.006v-1.089c0-.298-.119-.585-.33-.796l-1.347-1.347a1.125 1.125 0 0 1-.21-1.298L9.75 12l-1.64-1.64a6 6 0 0 1-1.676-3.257l-.172-1.03Z" clip-rule="evenodd" />
					</svg>
					<span class="nav_item_text transition-opacity duration-300">Tracking</span>
				</a>
			</li>
			<li>
				<a href="/reports/Dashboard/" class={`nav_item ${currentPath.startsWith('/reports') ? 'active' : ''}`}>
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="nav_item_icon">
						<path
							fill-rule="evenodd"
							d="M2.25 2.25a.75.75 0 0 0 0 1.5H3v10.5a3 3 0 0 0 3 3h1.21l-1.172 3.513a.75.75 0 0 0 1.424.474l.329-.987h8.418l.33.987a.75.75 0 0 0 1.422-.474l-1.17-3.513H18a3 3 0 0 0 3-3V3.75h.75a.75.75 0 0 0 0-1.5H2.25Zm6.54 15h6.42l.5 1.5H8.29l.5-1.5Zm8.085-8.995a.75.75 0 1 0-.75-1.299 12.81 12.81 0 0 0-3.558 3.05L11.03 8.47a.75.75 0 0 0-1.06 0l-3 3a.75.75 0 1 0 1.06 1.06l2.47-2.47 1.617 1.618a.75.75 0 0 0 1.146-.102 11.312 11.312 0 0 1 3.612-3.321Z"
							clip-rule="evenodd" />
					</svg>
					<span class="nav_item_text transition-opacity duration-300">Reports</span>
				</a>
			</li>
		</ul>

		<!-- BOTTOM CONTROLS -->
		<div class="p-4 py-2 text-sm flex justify-between items-center sidebar-controls">
			<button class="btn-theme flex gap-2 items-center p-2 pl-6 rounded cursor-pointer relative transition-all duration-300" onclick="toggleTheme()" title="Toggle Theme">
				<svg
					xmlns="http://www.w3.org/2000/svg"
					fill="none"
					viewBox="0 0 24 24"
					stroke-width="{1.5}"
					stroke="currentColor"
					class="icon light-icon active">
					<path
						stroke-linecap="round"
						stroke-linejoin="round"
						d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z" />
				</svg>
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="{1.5}" fill="currentColor" class="icon dark-icon">
					<path
						fill-rule="evenodd"
						d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z"
						clip-rule="evenodd" />
				</svg>
			</button>

			<button class="btn-sidebar-toggle flex gap-2 items-center p-2 rounded cursor-pointer transition-all duration-300" onclick="openSidebarModal()" title="Sidebar Settings">
				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="sidebar-toggle-icon"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 4.5v15m-4.875 0h15.75c.621 0 1.125-.504 1.125-1.125V5.625c0-.621-.504-1.125-1.125-1.125H4.125C3.504 4.5 3 5.004 3 5.625v12.75c0 .621.504 1.125 1.125 1.125"/>
				</svg>
			</button>
		</div>

	</nav>

</aside>

<!-- Sidebar Control Modal -->
<div id="sidebarModal" class="fixed inset-0 bg-black bg-opacity-50 items-center justify-center z-50 hidden transition-opacity duration-300" style="opacity: 0;">
	<div class="modal-content bg-primary border border-border_color rounded-lg p-6 w-96 max-w-md mx-4 transform transition-transform duration-300" style="transform: scale(0.95);">
		<div class="flex justify-between items-center mb-4">
			<h3 class="text-lg font-semibold text-textColor-primary">Sidebar Settings</h3>
			<button onclick="closeSidebarModal()" class="text-textColor-tertiary hover:text-textColor-primary transition-colors">
				<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
					<line x1="18" y1="6" x2="6" y2="18"></line>
					<line x1="6" y1="6" x2="18" y2="18"></line>
				</svg>
			</button>
		</div>
		
		<div class="space-y-3">
			<div class="flex items-center space-x-3">
				<input type="radio" id="expanded" name="sidebarMode" value="expanded" class="text-btn-primary focus:ring-btn-primary">
				<label for="expanded" class="text-textColor-primary cursor-pointer flex-1">
					<div class="font-medium">Expanded</div>
					<div class="text-sm text-textColor-tertiary">Full sidebar always visible</div>
				</label>
			</div>
			
			<div class="flex items-center space-x-3">
				<input type="radio" id="collapsed" name="sidebarMode" value="collapsed" class="text-btn-primary focus:ring-btn-primary">
				<label for="collapsed" class="text-textColor-primary cursor-pointer flex-1">
					<div class="font-medium">Collapsed</div>
					<div class="text-sm text-textColor-tertiary">Icons only, no auto-expand</div>
				</label>
			</div>
			
			<div class="flex items-center space-x-3">
				<input type="radio" id="hover" name="sidebarMode" value="hover" class="text-btn-primary focus:ring-btn-primary">
				<label for="hover" class="text-textColor-primary cursor-pointer flex-1">
					<div class="font-medium">Auto-expand on Hover</div>
					<div class="text-sm text-textColor-tertiary">Icons only, expands when hovered</div>
				</label>
			</div>
		</div>
		
		<div class="flex justify-end space-x-3 mt-6">
			<button onclick="closeSidebarModal()" class="px-4 py-2 text-textColor-tertiary hover:text-textColor-primary transition-colors">
				Cancel
			</button>
			<button onclick="applySidebarMode()" class="px-4 py-2 bg-btn-primary hover:bg-btn-hover text-textColor-secondary rounded transition-colors">
				Apply
			</button>
		</div>
	</div>
</div>