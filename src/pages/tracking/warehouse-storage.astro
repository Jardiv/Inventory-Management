---
import Layout from '../../layouts/Layout.astro';
---

<Layout>
  <div class="w-full max-w-[100%] bg-primary rounded-md mx-auto p-6 text-textColor-primary font-poppins">
    <!-- Title -->
    <div class="flex justify-between items-center mb-6">
      <!-- LEFT: Warehouse title + Select button -->
      <div class="flex gap-4 items-center">
        <h2 class="text-2xl font-semibold">Warehouse 1</h2>

        <!-- Select Warehouse Button -->
        <div class="relative">
          <button onclick="document.getElementById('warehouse-dropdown').classList.toggle('hidden')"
            class="flex items-center gap-2 px-4 py-2 border border-transparent rounded hover:border-btn-hover transition">
            <span>Select Warehouse</span>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
              <path fill-rule="evenodd" d="M12.53 16.28a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 0 1 1.06-1.06L12 14.69l6.97-6.97a.75.75 0 1 1 1.06 1.06l-7.5 7.5Z" clip-rule="evenodd" />
            </svg>
          </button>

          <!-- Dropdown -->
          <div id="warehouse-dropdown"
            class="hidden absolute left-1/2 -translate-x-1/2 mt-2 bg-primary border border-border_color rounded shadow-md z-10 w-[130px]">
            <ul class="py-1 text-sm text-textColor-primary text-left">
              <li><a href="#" class="block px-4 py-2 hover:bg-btn-hover">Warehouse 1</a></li>
              <li><a href="#" class="block px-4 py-2 hover:bg-btn-hover">Warehouse 2</a></li>
              <li><a href="#" class="block px-4 py-2 hover:bg-btn-hover">Warehouse 3</a></li>
            </ul>
          </div>
        </div>
      </div>

      <!-- RIGHT: Filter + Cancel -->
      <div class="flex gap-3 items-center">
        <button id="openWarehouseModal" class="flex items-center gap-2 px-4 py-2 border border-transparent rounded hover:border-btn-hover transition">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
            <path fill-rule="evenodd" d="M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z" clip-rule="evenodd" />
          </svg>
          Add Warehouse
        </button>
        <!-- Filter Button -->
        <div class="relative inline-block text-center">
          <button onclick="document.getElementById('filter-dropdown').classList.toggle('hidden')"
            class="bg-primary text-secondary rounded px-4 py-3 text-sm hover:text-textColor-secondary hover:bg-violet-600 w-[60px]">
            <svg id="filterIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"
              stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <line x1="3" y1="6" x2="21" y2="6" />
              <line x1="6" y1="12" x2="18" y2="12" />
              <line x1="9" y1="18" x2="15" y2="18" />
            </svg>
          </button>

          <!-- Filter Dropdown -->
          <div id="filter-dropdown"
            class="hidden absolute left-1/2 -translate-x-1/2 mt-2 bg-primary border border-border_color rounded shadow-md z-10 w-[130px]">
            <ul class="py-1 text-sm text-textColor-primary text-left">
              <li><a href="#" class="block px-4 py-2 hover:bg-btn-hover">Received</a></li>
              <li><a href="#" class="block px-4 py-2 hover:bg-btn-hover">Delivered</a></li>
              <li><a href="#" class="block px-4 py-2 hover:bg-btn-hover">Pending</a></li>
            </ul>
          </div>
        </div>

        <!-- Cancel Button -->
        <a href="/tracking/Dashboard">
          <button class="bg-primary text-secondary rounded px-4 py-3 text-sm hover:text-textColor-secondary hover:bg-violet-600 w-[60px]">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
              stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mx-auto">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
            </svg>
          </button>
        </a>
      </div>
    </div>

    <!-- Table -->
    <div class="overflow-x-auto">
      <table class="w-full text-left border-collapse">
        <thead class="border-b border-border_color text-lg">
          <tr>
            <th class="py-3 px-4 text-center">Item ID</th>
            <th class="py-3 px-4 text-center">Item Name</th>
            <th class="py-3 px-4 text-center">Quantity</th>
            <th class="py-3 px-4 text-center">Category</th>
            <th class="py-3 px-4 text-center">Status</th>
            <th class="py-3 px-4 text-center">Date Added</th>
          </tr>
        </thead>
        <tbody class="text-base divide-y divide-border_color">
          <!-- Row 1 -->
          <tr>
            <td class="py-3 px-4 text-center">A001</td>
            <td class="py-3 px-4 text-center">Mega Sardines</td>
            <td class="py-3 px-4 text-center">100</td>
            <td class="py-3 px-4 text-center">Canned Goods</td>
            <td class="py-3 px-4 text-green-400 font-semibold text-center">Normal</td>
            <td class="py-3 px-4 text-center">MM-DD-YYYY</td>
          </tr>
          <!-- Row 2 -->
          <tr>
            <td class="py-3 px-4 text-center">A001</td>
            <td class="py-3 px-4 text-center">Century tuna</td>
            <td class="py-3 px-4 text-center">200</td>
            <td class="py-3 px-4 text-center">Canned Goods</td>
            <td class="py-3 px-4 text-green-400 font-semibold text-center">Normal</td>
            <td class="py-3 px-4 text-center">MM-DD-YYYY</td>
          </tr>
          <!-- Row 3 -->
          <tr>
            <td class="py-3 px-4 text-center">B002</td>
            <td class="py-3 px-4 text-center">Keyboard</td>
            <td class="py-3 px-4 text-center">50</td>
            <td class="py-3 px-4 text-center">Computer Equipment</td>
            <td class="py-3 px-4 text-green-400 font-semibold text-center">Normal</td>
            <td class="py-3 px-4 text-center">MM-DD-YYYY</td>
          </tr>
          <!-- Row 4 -->
          <tr>
            <td class="py-3 px-4 text-center">C001</td>
            <td class="py-3 px-4 text-center">Safeguard</td>
            <td class="py-3 px-4 text-center">0</td>
            <td class="py-3 px-4 text-center">Toiletries</td>
            <td class="py-3 px-4 text-red-500 font-semibold text-center">Out of Stock</td>
            <td class="py-3 px-4 text-center">MM-DD-YYYY</td>
          </tr>
          <!-- Row 5 -->
          <tr>
            <td class="py-3 px-4 text-center">A001</td>
            <td class="py-3 px-4 text-center">Ligo Sardines</td>
            <td class="py-3 px-4 text-center">100</td>
            <td class="py-3 px-4 text-center">Canned Goods</td>
            <td class="py-3 px-4 text-yellow-500 font-semibold text-center">Low</td>
            <td class="py-3 px-4 text-center">MM-DD-YYYY</td>
          </tr>
          <tr>
            <td class="py-3 px-4 text-center" colspan="6">&nbsp;</td>
          </tr>
          <tr>
            <td class="py-3 px-4 text-center" colspan="6">&nbsp;</td>
          </tr>
          <tr>
            <td class="py-3 px-4 text-center" colspan="6">&nbsp;</td>
          </tr>
          <tr>
            <td class="py-3 px-4 text-center" colspan="6">&nbsp;</td>
          </tr>
          <tr>
            <td class="py-3 px-4 text-center" colspan="6">&nbsp;</td>
          </tr>
          <tr>
            <td class="py-3 px-4 text-center" colspan="6">&nbsp;</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div class="flex justify-between items-center border-t border-border_color pt-4 mt-4 text-sm text-gray-700">
      <!-- Left: Showing text -->
      <div>
        Showing <span class="font-medium">1</span>-<span class="font-medium">10</span> of <span class="font-medium">45</span> products
      </div>

      <!-- Right: Pagination -->
      <nav class="flex items-center gap-1">
        <!-- Prev -->
        <a href="?page=1" class="px-2 py-1 text-gray-500 hover:text-gray-700">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
          </svg>
        </a>

        <!-- Page numbers -->
        <a href="?page=1" class="px-3 py-1.5 bg-[#8A00C4] text-white rounded-lg font-medium">1</a>
        <a href="?page=2" class="px-3 py-1.5 text-gray-700 hover:bg-gray-100 rounded-lg">2</a>
        <span class="px-2 py-1 text-gray-500">...</span>
        <a href="?page=5" class="px-3 py-1.5 text-gray-700 hover:bg-gray-100 rounded-lg">5</a>

        <!-- Next -->
        <a href="?page=2" class="px-2 py-1 text-gray-500 hover:text-gray-700">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
          </svg>
        </a>
      </nav>
    </div>

  </div>

  <!-- Add Warehouse Modal -->
  <div id="addWarehouseModal" class="hidden fixed inset-0 bg-black/60 flex justify-center items-center z-50">
    <div class="bg-primary text-textColor-primary rounded-md w-[400px] p-6 shadow-lg border border-border_color relative">
      <h2 class="text-xl font-semibold mb-4">Add New Warehouse</h2>

      <form id="warehouseRequestForm">

        <label class="block mb-1">Warehouse Name</label>
        <input type="text" class="w-full border border-border_color rounded px-3 py-2 mb-4 bg-primary text-textColor-primary placeholder:text-textColor-tertiary focus:outline-none focus:ring-2 focus:ring-btn-primary" required/>
        <label class="block mb-1">Location</label>
        <input type="text" class="w-full border border-border_color rounded px-3 py-2 mb-4 bg-primary text-textColor-primary placeholder:text-textColor-tertiary focus:outline-none focus:ring-2 focus:ring-btn-primary" required/>
        <label class="block mb-1">Description (optional)</label>
        <textarea class="w-full border border-border_color rounded px-3 py-2 mb-4 bg-primary text-textColor-primary placeholder:text-textColor-tertiary focus:outline-none focus:ring-2 focus:ring-btn-primary"></textarea>

        <div class="text-sm text-textColor-tertiary mb-4">
          Requested By: <span class="font-medium text-textColor-primary">Inventory module</span><br />
          Requested Date: <span class="font-medium text-textColor-primary">Current Date</span>
        </div>

        <div class="flex justify-end gap-2">
          <button type="button" id="closeWarehouseModal" class="px-4 py-2 bg-red text-white rounded hover:bg-red/80">
            Cancel
          </button>
          <button type="submit" class="px-4 py-2 bg-green text-white rounded hover:bg-green/80">
            Submit
          </button>
        </div>
      </form>
    </div>
  </div>


  
  <div> </div>
  <!-- ✅ Modal Script -->
  <script>
    // Modal 1: For general use (e.g., ID = 'modal')
    const modal1 = document.getElementById('modal');
    const openBtn1 = document.getElementById('open-modal');
    const closeBtn1 = document.getElementById('close-modal');

    openBtn1?.addEventListener('click', () => {
      modal1.classList.remove('hidden');
    });

    closeBtn1?.addEventListener('click', () => {
      modal1.classList.add('hidden');
    });

    modal1?.addEventListener('click', (e) => {
      if (e.target === modal1) {
        modal1.classList.add('hidden');
      }
    });

    // Modal 2: For Add Warehouse modal
    const warehouseModal = document.getElementById("addWarehouseModal");
    const openWarehouseBtn = document.getElementById("openWarehouseModal");
    const closeWarehouseBtn = document.getElementById("closeWarehouseModal");

    openWarehouseBtn?.addEventListener("click", () => {
      warehouseModal.classList.remove("hidden");
    });

    closeWarehouseBtn?.addEventListener("click", () => {
      warehouseModal.classList.add("hidden");
    });

    warehouseModal?.addEventListener("click", (e) => {
      if (e.target === warehouseModal) {
        warehouseModal.classList.add("hidden");
      }
    });
  </script>

</Layout>
